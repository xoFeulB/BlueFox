var t={d:(e,r)=>{for(var s in r)t.o(r,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:r[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{Gt:()=>n,Tl:()=>u,BE:()=>i,hc:()=>a,UU:()=>r,Uq:()=>y,Up:()=>p,pX:()=>c,X7:()=>l});const r=(t,e,s=".")=>{let o=t.split(s)[0],n=t.split(s).slice(1).join(s);if(null!=e[o]){let i=r(n,e[o],s);return!0===i?{object:e,property:o,path:t,separator:s,value:e[o]}:i}return t==n};class s{constructor(){this.J=null,this.take=[],this.actions=null,this.dispatchEvents=null,this.msec=null,this.sleep=t=>new Promise((e=>setTimeout(e,t))),this.actionHandler={set:async t=>{let e=document.querySelector(t.target);if(e){if(t.property)for(let s in t.property){let o=r(s,e);if(o.object){o.object[o.property]=t.property[s];for(let t of this.dispatchEvents)e.dispatchEvent(new Event(t,{bubbles:!0}))}}if(t.attribute)for(let r in t.attribute){e.setAttribute(r,t.attribute[r]);for(let t of this.dispatchEvents)e.dispatchEvent(new Event(t,{bubbles:!0}))}}},take:async t=>{let e=document.querySelector(t.target);if(e){let s=t;if(t.property){let o={};for(let s in t.property){let t=r(s,e);t.object&&(o[s]=t.object[t.property])}Object.assign(s,{property:o})}if(t.attribute){let r={};for(let s in t.attribute)r[s]=e.getAttribute(s);Object.assign(s,{attribute:r})}this.take.push(s)}},eval:async t=>{let e=document.querySelector(t.target);if(e&&t.property)for(let s in t.property){let o=r(s,e);o.object&&o.object[o.property](t.property[s])}},capture:async t=>{let e=document.querySelector(t.target);if(e)try{await this.captureDOM(t.fileName,e,window,t.format,t.quality)}catch{}},sleep:async t=>{await this.sleep(t.target)},event:async t=>{let e=document.querySelector(t.target);e&&e.dispatchEvent(new Event(t.dispatchEvent,{bubbles:!0}))},save:async t=>{let e=this.J;Object.assign(e,{takes:this.take}),Object.assign(document.createElement("a"),{href:window.URL.createObjectURL(new Blob([JSON.stringify(e)],{type:"application/json"})),download:`${t.fileName}.json`}).click(),this.take=[]}}}async do(t){this.J=t,this.take=[],this.actions=t.actions,this.dispatchEvents=t.dispatchEvents,this.msec=t.sleep;for(let t of this.actions)await this.actionHandler[t.type](t),0!=this.msec&&await this.sleep(this.msec);return Object.assign(t,{stack:this.take})}}class o{constructor(){this.J=null,this.stack=[],this.actions=null,this.dispatchEvents=null,this.msec=null,this.focus=document,this.sleep=t=>new Promise((e=>setTimeout(e,t))),this.actionHandler={set:async t=>{let e=this.focus.querySelector(t.target.selector);if(e){if(t?.target?.property){let s=r(t.target.property,e);s.object&&(e=s.object[s.property])}if(t?.option?.property)for(let s in t.option.property){let o=r(s,e);if(o.object){o.object[o.property]=t.option.property[s];for(let t of this.dispatchEvents){let s=r(t.option.eventObject,window),o=s.object[s.property];e.dispatchEvent(new o(t.option.eventType,t.option.eventArgs))}}}if(t?.option?.attribute)for(let s in t.option.attribute){e.setAttribute(s,t.option.attribute[s]);for(let t of this.dispatchEvents){let s=r(t.option.eventObject,window),o=s.object[s.property];e.dispatchEvent(new o(t.option.eventType,t.option.eventArgs))}}}},push:async t=>{let e=this.focus.querySelector(t.target.selector);if(e){if(t?.target?.property){let s=r(t.target.property,e);s.object&&(e=s.object[s.property])}let s=t;if(t?.option?.property){let o={};for(let s in t.option.property){let t=r(s,e);t.object&&(o[s]=t.object[t.property])}Object.assign(s.option,{property:o})}if(t?.option?.attribute){let r={};for(let s in t.option.attribute)r[s]=e.getAttribute(s);Object.assign(s.option,{attribute:r})}this.stack.push(s)}},call:async t=>{let e=this.focus.querySelector(t.target.selector);if(e){let s=r(t.target.property,e);s.object&&(t?.option?s.object[s.property](t?.option):s.object[s.property]())}},event:async t=>{let e=this.focus.querySelector(t.target.selector);if(e)if(t?.target?.property){let s=r(t.target.property,e);if(s.object){let e=r(t.option.eventObject,window),o=e.object[e.property];s.object[s.property].dispatchEvent(new o(t.option.eventType,Object.assign({target:s.object[s.property],view:window},t.option.eventArgs)))}}else{let s=r(t.option.eventObject,window),o=s.object[s.property];e.dispatchEvent(new o(t.option.eventType,Object.assign({target:e,view:window},t.option.eventArgs)))}},key:async t=>{try{await this.dispatchKeyEvent(t.option)}catch(t){}},file:async t=>{let e=this.focus.querySelector(t.target.selector);try{let r=new DataTransfer;t.files.forEach((t=>{let e=new File([new window[t.object](t.blob)],t.name,{type:t.type});r.items.add(e)})),e.files=r.files}catch(t){}},sleep:async t=>{await this.sleep(t.option.msec)},open:async t=>{window.location.href=t.option.url},focus:async t=>{let e=this.focus.querySelector(t.target.selector);if(e)if(t?.target?.property){let s=r(t.target.property,e);s.object&&(this.focus=s.object[s.property])}else this.focus=e;t?.target?.reset&&(this.focus=document)},capture:async t=>{let e=this.focus.querySelector(t.target.selector);if(e){if(t?.target?.property){let s=r(t.target.property,e);s.object&&(e=s.object[s.property])}try{await this.captureDOM(t.option.fileName,e,window,t.option.format,t.option.quality)}catch(t){}}},save:async t=>{let e=this.J;Object.assign(e,{stack:this.stack}),Object.assign(this.focus.createElement("a"),{href:window.URL.createObjectURL(new Blob([JSON.stringify(e,null,4)],{type:"application/json"})),download:`${t.option.fileName}.json`}).click(),this.stack=[]}}}async do(t){this.J=t,this.stack=[],this.actions=t.actions,this.dispatchEvents=t.dispatchEvents,this.msec=t.sleep;for(let t of this.actions)await this.actionHandler[t.type](t),0!=this.msec&&await this.sleep(this.msec);return Object.assign(t,{stack:this.stack})}}class n{async do(t){return await{0:async()=>{let e=new s;return e.captureDOM=this.captureDOM,await e.do(t)},1:async()=>{let e=new o;return e.captureDOM=this.captureDOM,e.dispatchKeyEvent=this.dispatchKeyEvent,await e.do(t)}}[t.meta.version]()}}class i{constructor(t){return this.selector="",this.tail={},this.init(t),this}init(t){return this.tail=Object.assign({meta:{version:1},sleep:0,dispatchEvents:[{option:{eventObject:"Event",eventType:"change",eventArgs:{bubbles:!0}}},{option:{eventObject:"Event",eventType:"input",eventArgs:{bubbles:!0}}}],actions:[]},t),this.stack=[],this}target(t){return this.selector=t,this}defined(t){return this.selector=`:is([data-testid="${t}"],[bluefox-label="${t}"],[aria-description="${t}"],[aria-label="${t}"])`,this}set(t){return this.tail.actions.push({type:"set",target:{selector:this.selector,property:null,all:!1},option:t}),this}setProperty(t){return this.tail.actions.push({type:"set",target:{selector:this.selector,property:null,all:!1},option:{property:t}}),this}setAttribute(t){return this.tail.actions.push({type:"set",target:{selector:this.selector,property:null,all:!1},option:{attribute:t}}),this}call(t,e){return this.tail.actions.push({type:"call",target:{selector:this.selector,property:t},option:e}),this}event(t){return this.tail.actions.push({type:"event",target:{selector:this.selector,property:null},option:t}),this}focus(t,e=!1){return this.tail.actions.push({type:"focus",target:{selector:this.selector,property:t,reset:e}}),this}capture(t=this.selector,e={fileName:"capture",format:"png",quality:100}){return this.tail.actions.push({type:"capture",target:{selector:t,property:null},option:e}),this}key(t){return this.tail.actions.push({type:"key",option:t}),this}open(t){return this.tail.actions.push({type:"open",option:{url:t}}),this}sleep(t){return this.tail.actions.push({type:"sleep",option:{msec:t}}),this}file(t){return this.tail.actions.push({type:"file",target:{selector:this.selector},files:t}),this}}const a=t=>{if("object"!=typeof t)return[];let e=[];for(let r in t){let s=t[r];if("object"==typeof s)a(s).forEach((t=>{e.push({path:[r,t.path].flat(),value:t.value,type:typeof t.value})}));else{let t={path:r,value:s,type:typeof s};e.push(t)}}return e},c=async(t={_scope_:null})=>{let e=[];return Object.keys(t).filter((t=>!["_scope_"].includes(t))).forEach((r=>{[...t._scope_.querySelectorAll(r)].filter((t=>t)).forEach((t=>{e.push({element:t,selector:new String(r)})}))})),await Promise.all(e.map((e=>new Promise((async(r,s)=>{try{await t[e.selector]({element:e.element,selector:e.selector,self:t}),r(e.selector)}catch(t){console.info("walkHorizontally |",t)}}))))),t},l=async(t={_scope_:null})=>{for(let e of Object.keys(t).filter((t=>!["_scope_"].includes(t)))){let r=[...t._scope_.querySelectorAll(e)].filter((t=>t));for(let s of r)try{await t[e]({element:s,selector:new String(e),self:t})}catch(t){console.info("walkVertically |",t)}}return t},p=async(t=document)=>{await c({_scope_:t,"[capture]":async t=>{let e=document.querySelector(t.element.attributes.capture.value).tagName.toLowerCase();t.element.setAttribute("sync",""),t.element.setAttribute("sync-to-this",""),"input"==e?(t.element.setAttribute("sync-to-property","textContent"),t.element.setAttribute("sync-from",t.element.attributes.capture.value),t.element.setAttribute("sync-from-property","value"),t.element.setAttribute("sync-event",JSON.stringify(["sync","change","input"]))):"select"==e&&(t.element.setAttribute("sync-to-property","textContent"),t.element.setAttribute("sync-from",t.element.attributes.capture.value),t.element.setAttribute("sync-from-property","selectedOptions.0.textContent"),t.element.setAttribute("sync-event",JSON.stringify(["sync","change"]))),t.element.removeAttribute("capture")}}),await l({_scope_:t,"[sync]":async t=>{let e=()=>{s()},s=()=>{t.element.SyncView={from:t.element.attributes["sync-from-this"]?t.element:document.querySelector(t.element.attributes["sync-from"].value),fromProperty:t.element.attributes["sync-from-property"].value,to:t.element.attributes["sync-to-this"]?t.element:document.querySelector(t.element.attributes["sync-to"].value),toProperty:t.element.attributes["sync-to-property"].value,events:JSON.parse(t.element.attributes["sync-event"]?t.element.attributes["sync-event"].value:'["sync"]'),entryNop:t.element.attributes["sync-entry-nop"],init:e},t.element.SyncView.sync=()=>{let e=r(t.element.SyncView.fromProperty,t.element.SyncView.from),s=r(t.element.SyncView.toProperty,t.element.SyncView.to);try{s.object[s.property]=e.object[e.property]}catch{}},!t.element.SyncView.entryNop&&t.element.SyncView.sync(),t.element.SyncView.events.forEach((e=>{t.element.SyncView.from.addEventListener(e,(e=>{t.element.SyncView.sync(),t.element.SyncView.to.dispatchEvent(new Event("sync"))}))}))};e()},sync:async t=>{t.element.SyncView={Syncs:[]};let e=JSON.parse(t.element.textContent),s=t=>{o(t)},o=e=>{let o=e.separator?e.separator:".",n=e.from.split(o),i=e.to.split(o),a=e.events,c=t.self._scope_.querySelector(n[0]),l=t.self._scope_.querySelector(i[0]),p={separator:o,from:c,fromProperty:n.slice(1).join(o),to:l,toProperty:i.slice(1).join(o),events:a,entryNop:e.entryNop,init:s,sync:()=>{let t=r(p.fromProperty,p.from,p.separator),e=r(p.toProperty,p.to,p.separator);try{e.object[e.property]=t.object[t.property]}catch{}}};p.events.forEach((t=>{p.from.addEventListener(t,(t=>{p.sync(),p.to.dispatchEvent(new Event("sync"))}))})),!p.entryNop&&p.sync(),t.element.SyncView.Syncs.push(p)};Array.prototype==e.__proto__&&e.forEach((t=>{s(t)})),Object.prototype==e.__proto__&&s(e)}})},y=async(t={},e=document)=>{let r={values:{},flesh:()=>{Object.keys(r.values).forEach((t=>{r.values[`${t}`].set(r.values[t].value)}))}};return Object.keys(t).forEach((s=>{r.values[`${s}`]={value:t[s],origin:t[s],set:t=>{r.values[s].value=t,[...e.querySelectorAll(`[setTextContent="${s}"]`)].forEach((e=>{e.textContent=t})),r.values[s].value=t,[...e.querySelectorAll(`[setValue="${s}"]`)].forEach((e=>{e.value=t}))}},r.values[`${s}`].set(t[s])})),r},u={Automation:{BlueFox:n,BlueFoxScript:i},Util:{getProperty:r,getAllPath:a},Walker:{walkHorizontally:c,walkVertically:l},Sync:{view:p,value:y}};var h=e.Gt,f=e.Tl,b=e.BE,m=e.hc,v=e.UU,w=e.Uq,d=e.Up,g=e.pX,j=e.X7;export{h as BlueFox,f as BlueFoxJs,b as BlueFoxScript,m as getAllPath,v as getProperty,w as value,d as view,g as walkHorizontally,j as walkVertically};