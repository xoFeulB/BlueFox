var e={d:(t,o)=>{for(var r in o)e.o(o,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{Gt:()=>n,Tl:()=>y,hc:()=>i,UU:()=>o,Uq:()=>p,Up:()=>l,pX:()=>c,X7:()=>a});const o=(e,t,r=".")=>{let s=e.split(r)[0],n=e.split(r).slice(1).join(r);if(null!=t[s]){let i=o(n,t[s],r);return!0===i?{object:t,property:s,path:e,separator:r,value:t[s]}:i}return e==n};class r{constructor(){this.J=null,this.take=[],this.actions=null,this.dispatchEvents=null,this.msec=null,this.sleep=e=>new Promise((t=>setTimeout(t,e))),this.actionHandler={set:async e=>{let t=document.querySelector(e.target);if(t){if(e.property)for(let r in e.property){let s=o(r,t);if(s.object){s.object[s.property]=e.property[r];for(let e of this.dispatchEvents)t.dispatchEvent(new Event(e,{bubbles:!0}))}}if(e.attribute)for(let o in e.attribute){t.setAttribute(o,e.attribute[o]);for(let e of this.dispatchEvents)t.dispatchEvent(new Event(e,{bubbles:!0}))}}},take:async e=>{let t=document.querySelector(e.target);if(t){let r=e;if(e.property){let s={};for(let r in e.property){let e=o(r,t);e.object&&(s[r]=e.object[e.property])}Object.assign(r,{property:s})}if(e.attribute){let o={};for(let r in e.attribute)o[r]=t.getAttribute(r);Object.assign(r,{attribute:o})}this.take.push(r)}},eval:async e=>{let t=document.querySelector(e.target);if(t&&e.property)for(let r in e.property){let s=o(r,t);s.object&&s.object[s.property](e.property[r])}},capture:async e=>{let t=document.querySelector(e.target);if(t)try{await this.captureDOM(e.fileName,t,window,e.format,e.quality)}catch{}},sleep:async e=>{await this.sleep(e.target)},event:async e=>{let t=document.querySelector(e.target);t&&t.dispatchEvent(new Event(e.dispatchEvent,{bubbles:!0}))},save:async e=>{let t=this.J;Object.assign(t,{takes:this.take}),Object.assign(document.createElement("a"),{href:window.URL.createObjectURL(new Blob([JSON.stringify(t)],{type:"application/json"})),download:`${e.fileName}.json`}).click(),this.take=[]}}}async do(e){this.J=e,this.take=[],this.actions=e.actions,this.dispatchEvents=e.dispatchEvents,this.msec=e.sleep;for(let e of this.actions)await this.actionHandler[e.type](e),0!=this.msec&&await this.sleep(this.msec);return Object.assign(e,{stack:this.take})}}class s{constructor(){this.J=null,this.stack=[],this.actions=null,this.dispatchEvents=null,this.msec=null,this.focus=document,this.sleep=e=>new Promise((t=>setTimeout(t,e))),this.actionHandler={set:async e=>{let t=this.focus.querySelector(e.target.selector);if(t){if(e?.target?.property){let r=o(e.target.property,t);r.object&&(t=r.object[r.property])}if(e?.option?.property)for(let r in e.option.property){let s=o(r,t);if(s.object){s.object[s.property]=e.option.property[r];for(let e of this.dispatchEvents){let r=o(e.option.eventObject,window),s=r.object[r.property];t.dispatchEvent(new s(e.option.eventType,e.option.eventArgs))}}}if(e?.option?.attribute)for(let r in e.option.attribute){t.setAttribute(r,e.option.attribute[r]);for(let e of this.dispatchEvents){let r=o(e.option.eventObject,window),s=r.object[r.property];t.dispatchEvent(new s(e.option.eventType,e.option.eventArgs))}}}},push:async e=>{let t=this.focus.querySelector(e.target.selector);if(t){if(e?.target?.property){let r=o(e.target.property,t);r.object&&(t=r.object[r.property])}let r=e;if(e?.option?.property){let s={};for(let r in e.option.property){let e=o(r,t);e.object&&(s[r]=e.object[e.property])}Object.assign(r.option,{property:s})}if(e?.option?.attribute){let o={};for(let r in e.option.attribute)o[r]=t.getAttribute(r);Object.assign(r.option,{attribute:o})}this.stack.push(r)}},call:async e=>{let t=this.focus.querySelector(e.target.selector);if(t){let r=o(e.target.property,t);r.object&&(e?.option?r.object[r.property](e?.option):r.object[r.property]())}},event:async e=>{let t=this.focus.querySelector(e.target.selector);if(t)if(e?.target?.property){let r=o(e.target.property,t);if(r.object){let t=o(e.option.eventObject,window),s=t.object[t.property];r.object[r.property].dispatchEvent(new s(e.option.eventType,Object.assign({target:r.object[r.property],view:window},e.option.eventArgs)))}}else{let r=o(e.option.eventObject,window),s=r.object[r.property];t.dispatchEvent(new s(e.option.eventType,Object.assign({target:t,view:window},e.option.eventArgs)))}},key:async e=>{try{await this.dispatchKeyEvent(e.option)}catch(e){}},file:async e=>{let t=this.focus.querySelector(e.target.selector);try{let o=new DataTransfer;e.files.forEach((e=>{let t=new File([new window[e.object](e.blob)],e.name,{type:e.type});o.items.add(t)})),t.files=o.files}catch(e){}},sleep:async e=>{await this.sleep(e.option.msec)},open:async e=>{window.location.href=e.option.url},focus:async e=>{let t=this.focus.querySelector(e.target.selector);if(t)if(e?.target?.property){let r=o(e.target.property,t);r.object&&(this.focus=r.object[r.property])}else this.focus=t;e?.target?.reset&&(this.focus=document)},capture:async e=>{let t=this.focus.querySelector(e.target.selector);if(t){if(e?.target?.property){let r=o(e.target.property,t);r.object&&(t=r.object[r.property])}try{await this.captureDOM(e.option.fileName,t,window,e.option.format,e.option.quality)}catch(e){}}},save:async e=>{let t=this.J;Object.assign(t,{stack:this.stack}),Object.assign(this.focus.createElement("a"),{href:window.URL.createObjectURL(new Blob([JSON.stringify(t,null,4)],{type:"application/json"})),download:`${e.option.fileName}.json`}).click(),this.stack=[]}}}async do(e){this.J=e,this.stack=[],this.actions=e.actions,this.dispatchEvents=e.dispatchEvents,this.msec=e.sleep;for(let e of this.actions)await this.actionHandler[e.type](e),0!=this.msec&&await this.sleep(this.msec);return Object.assign(e,{stack:this.stack})}}class n{async do(e){return await{0:async()=>{let t=new r;return t.captureDOM=this.captureDOM,await t.do(e)},1:async()=>{let t=new s;return t.captureDOM=this.captureDOM,t.dispatchKeyEvent=this.dispatchKeyEvent,await t.do(e)}}[e.meta.version]()}}const i=e=>{if("object"!=typeof e)return[];let t=[];for(let o in e){let r=e[o];if("object"==typeof r)i(r).forEach((e=>{t.push({path:[o,e.path].flat(),value:e.value,type:typeof e.value})}));else{let e={path:o,value:r,type:typeof r};t.push(e)}}return t},c=async(e={_scope_:null})=>{let t=[];return Object.keys(e).filter((e=>!["_scope_"].includes(e))).forEach((o=>{[...e._scope_.querySelectorAll(o)].filter((e=>e)).forEach((e=>{t.push({element:e,selector:new String(o)})}))})),await Promise.all(t.map((t=>new Promise((async(o,r)=>{try{await e[t.selector]({element:t.element,selector:t.selector,self:e}),o(t.selector)}catch(e){console.info("walkHorizontally |",e)}}))))),e},a=async(e={_scope_:null})=>{for(let t of Object.keys(e).filter((e=>!["_scope_"].includes(e)))){let o=[...e._scope_.querySelectorAll(t)].filter((e=>e));for(let r of o)try{await e[t]({element:r,selector:new String(t),self:e})}catch(e){console.info("walkVertically |",e)}}return e},l=async(e=document)=>{await c({_scope_:e,"[capture]":async e=>{let t=document.querySelector(e.element.attributes.capture.value).tagName.toLowerCase();e.element.setAttribute("sync",""),e.element.setAttribute("sync-to-this",""),"input"==t?(e.element.setAttribute("sync-to-property","textContent"),e.element.setAttribute("sync-from",e.element.attributes.capture.value),e.element.setAttribute("sync-from-property","value"),e.element.setAttribute("sync-event",JSON.stringify(["sync","change","input"]))):"select"==t&&(e.element.setAttribute("sync-to-property","textContent"),e.element.setAttribute("sync-from",e.element.attributes.capture.value),e.element.setAttribute("sync-from-property","selectedOptions.0.textContent"),e.element.setAttribute("sync-event",JSON.stringify(["sync","change"]))),e.element.removeAttribute("capture")}}),await a({_scope_:e,"[sync]":async e=>{let t=()=>{r()},r=()=>{e.element.SyncView={from:e.element.attributes["sync-from-this"]?e.element:document.querySelector(e.element.attributes["sync-from"].value),fromProperty:e.element.attributes["sync-from-property"].value,to:e.element.attributes["sync-to-this"]?e.element:document.querySelector(e.element.attributes["sync-to"].value),toProperty:e.element.attributes["sync-to-property"].value,events:JSON.parse(e.element.attributes["sync-event"]?e.element.attributes["sync-event"].value:'["sync"]'),entryNop:e.element.attributes["sync-entry-nop"],init:t},e.element.SyncView.sync=()=>{let t=o(e.element.SyncView.fromProperty,e.element.SyncView.from),r=o(e.element.SyncView.toProperty,e.element.SyncView.to);try{r.object[r.property]=t.object[t.property]}catch{}},!e.element.SyncView.entryNop&&e.element.SyncView.sync(),e.element.SyncView.events.forEach((t=>{e.element.SyncView.from.addEventListener(t,(t=>{e.element.SyncView.sync(),e.element.SyncView.to.dispatchEvent(new Event("sync"))}))}))};t()},sync:async e=>{e.element.SyncView={Syncs:[]};let t=JSON.parse(e.element.textContent),r=e=>{s(e)},s=t=>{let s=t.separator?t.separator:".",n=t.from.split(s),i=t.to.split(s),c=t.events,a=e.self._scope_.querySelector(n[0]),l=e.self._scope_.querySelector(i[0]),p={separator:s,from:a,fromProperty:n.slice(1).join(s),to:l,toProperty:i.slice(1).join(s),events:c,entryNop:t.entryNop,init:r,sync:()=>{let e=o(p.fromProperty,p.from,p.separator),t=o(p.toProperty,p.to,p.separator);try{t.object[t.property]=e.object[e.property]}catch{}}};p.events.forEach((e=>{p.from.addEventListener(e,(e=>{p.sync(),p.to.dispatchEvent(new Event("sync"))}))})),!p.entryNop&&p.sync(),e.element.SyncView.Syncs.push(p)};Array.prototype==t.__proto__&&t.forEach((e=>{r(e)})),Object.prototype==t.__proto__&&r(t)}})},p=async(e={},t=document)=>{let o={values:{},flesh:()=>{Object.keys(o.values).forEach((e=>{o.values[`${e}`].set(o.values[e].value)}))}};return Object.keys(e).forEach((r=>{o.values[`${r}`]={value:e[r],origin:e[r],set:e=>{o.values[r].value=e,[...t.querySelectorAll(`[setTextContent="${r}"]`)].forEach((t=>{t.textContent=e})),o.values[r].value=e,[...t.querySelectorAll(`[setValue="${r}"]`)].forEach((t=>{t.value=e}))}},o.values[`${r}`].set(e[r])})),o},y={Automation:{BlueFox:n},Util:{getProperty:o,getAllPath:i},Walker:{walkHorizontally:c,walkVertically:a},Sync:{view:l,value:p}};var u=t.Gt,h=t.Tl,f=t.hc,b=t.UU,m=t.Uq,v=t.Up,w=t.pX,d=t.X7;export{u as BlueFox,h as BlueFoxJs,f as getAllPath,b as getProperty,m as value,v as view,w as walkHorizontally,d as walkVertically};